clc;
clear all;
close all;

% 计算部分
syms theta1 theta2 theta3 theta4 theta5 theta6 a1 a2 a3 d4;
syms px py pz c1 c2 c3 s1 s2 s3 c23 s23;
col = [px; py; pz; 1];
T01 = [cos(theta1) -sin(theta1) 0 0; sin(theta1) cos(theta1) 0 0; 0 0 1 0; 0 0 0 1];
T12 = [cos(theta2) -sin(theta2) 0 a1; 0 0 1 0; -sin(theta2) -cos(theta2) 0 0; 0 0 0 1];
T23 = [cos(theta3) -sin(theta3) 0 a2; sin(theta3) cos(theta3) 0 0; 0 0 1 0; 0 0 0 1];
T34 = [cos(theta4) -sin(theta4) 0 a3; 0 0 1 d4; -sin(theta4) -cos(theta4) 0 0; 0 0 0 1];
T45 = [cos(theta5) -sin(theta5) 0 0; 0 0 -1 0; sin(theta5) cos(theta5) 0 0; 0 0 0 1];
T56 = [cos(theta6) -sin(theta6) 0 0; 0 0 1 0; -sin(theta6) -cos(theta6) 0 0; 0 0 0 1];
T06 = simplify(T01*T12*T23*T34*T45*T56);
T10 = simplify(inv(T01));
T161 = simplify(T10*T06);
T16 = simplify(T12*T23*T34*T45*T56);
T03 = simplify(T01*T12*T23);
T30 = simplify(inv(T03));
T361 = simplify(T30*T06);
T36 = simplify(T34*T45*T56);
T04 = simplify(T01*T12*T23*T34);
T40 = simplify(inv(T04));
T461 = simplify(T40*T06);
T46 = simplify(T45*T56);
T05 = simplify(T01*T12*T23*T34*T45);
T50 = simplify(inv(T05));
T26 = simplify(T23*T34*T45*T56);
p1 = T16(1:3, 4).';
p2 = T26(1:3, 4).';
p3 = T36(1:3, 4).';
p4 = T46(1:3, 4).';
p5 = T56(1:3, 4).';
n1 = T16(1:3, 1).';
n2 = T26(1:3, 1).';
n3 = T36(1:3, 1).';
n4 = T46(1:3, 1).';
n5 = T56(1:3, 1).';
o1 = T16(1:3, 2).';
o2 = T26(1:3, 2).';
o3 = T36(1:3, 2).';
o4 = T46(1:3, 2).';
o5 = T56(1:3, 2).';
aa1 = T16(1:3, 3).';
aa2 = T26(1:3, 3).';
aa3 = T36(1:3, 3).';
aa4 = T46(1:3, 3).';
aa5 = T56(1:3, 3).';
pn1 = simplify(cross(p1, n1));
pn2 = simplify(cross(p2, n2));
pn3 = simplify(cross(p3, n3));
pn4 = simplify(cross(p4, n4));
pn5 = simplify(cross(p5, n5));
po1 = simplify(cross(p1, o1));
po2 = simplify(cross(p2, o2));
po3 = simplify(cross(p3, o3));
po4 = simplify(cross(p4, o4));
po5 = simplify(cross(p5, o5));
pa1 = simplify(cross(p1, aa1));
pa2 = simplify(cross(p2, aa2));
pa3 = simplify(cross(p3, aa3));
pa4 = simplify(cross(p4, aa4));
pa5 = simplify(cross(p5, aa5));
J1 = simplify([pn1(3); po1(3); pa1(3); n1(3); o1(3); aa1(3)]);
J2 = simplify([pn2(3); po2(3); pa2(3); n2(3); o2(3); aa2(3)]);
J3 = simplify([pn3(3); po3(3); pa3(3); n3(3); o3(3); aa3(3)]);
J4 = simplify([pn4(3); po4(3); pa4(3); n4(3); o4(3); aa4(3)]);
J5 = simplify([pn5(3); po5(3); pa5(3); n5(3); o5(3); aa5(3)]);
J6 = [0;0;0;0;0;1];
J = [J1 J2 J3 J4 J5 J6];